{"ast":null,"code":"var _jsxFileName = \"/home/bamberg/sd-013-b-project-recipes-app/src/pages/Details.jsx\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { getDrinksApi, getFoodApi } from '../services';\nimport './details.css';\n\nclass Details extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      recipe: {},\n      recomendation: []\n    };\n    this.renderIgredients = this.renderIgredients.bind(this);\n    this.fetchRecomendations = this.fetchRecomendations.bind(this);\n    this.renderVideo = this.renderVideo.bind(this);\n    this.renderCategory = this.renderCategory.bind(this);\n    this.renderRecomendation = this.renderRecomendation.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchRecipeById();\n    this.fetchRecomendations();\n  }\n\n  async fetchRecomendations() {\n    const {\n      match: {\n        path\n      }\n    } = this.props;\n\n    if (path.includes('/comidas')) {\n      const response = await getDrinksApi('search.php?s=', '');\n      this.setState({\n        recomendation: response.drinks\n      });\n    } else {\n      const response = await getFoodApi('search.php?s=', '');\n      this.setState({\n        recomendation: response.meals\n      });\n    }\n  }\n\n  async fetchRecipeById() {\n    const {\n      match: {\n        params: {\n          id\n        },\n        path\n      }\n    } = this.props;\n\n    if (path.includes('/comidas')) {\n      const response = await getFoodApi(`lookup.php?i=${id}`, '');\n      this.setState({\n        recipe: response.meals[0]\n      });\n    } else {\n      const response = await getDrinksApi(`lookup.php?i=${id}`, '');\n      this.setState({\n        recipe: response.drinks[0]\n      });\n    }\n  }\n\n  renderIgredients(recipe) {\n    const array = Object.keys(recipe);\n    const arrayVazio = [];\n    array.map(key => {\n      if (key.includes('strIngredient') && recipe[key] !== null && recipe[key] !== '') {\n        arrayVazio.push(recipe[key]);\n        return arrayVazio;\n      }\n\n      return undefined;\n    });\n    return arrayVazio.map((igr, index) => /*#__PURE__*/React.createElement(\"li\", {\n      \"data-testid\": `${index}-ingredient-name-and-measure`,\n      key: igr,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, igr, \"-\", recipe[`strMeasure${index + 1}`]));\n  }\n\n  renderVideo(path, recipe) {\n    if (path.includes('/comidas')) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      }, \"Video\"), /*#__PURE__*/React.createElement(\"iframe\", {\n        \"data-testid\": \"video\",\n        width: \"300\",\n        height: \"150\",\n        src: recipe.strYoutube,\n        frameBorder: \"0\",\n        allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n        allowFullScreen: true,\n        title: \"Embedded youtube\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }\n      }));\n    }\n\n    return undefined;\n  }\n\n  renderCategory(path, recipe) {\n    if (path.includes('/comidas')) {\n      return /*#__PURE__*/React.createElement(\"h2\", {\n        \"data-testid\": \"recipe-category\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }\n      }, recipe.strCategory);\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      \"data-testid\": \"recipe-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, recipe.strAlcoholic), /*#__PURE__*/React.createElement(\"h2\", {\n      \"data-testid\": \"recipe-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, recipe.strCategory));\n  }\n\n  renderRecomendation(recomendation, path) {\n    const six = 6;\n    return recomendation.map((rec, index) => {\n      if (index < six) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          \"data-testid\": `${index}-recomendation-card`,\n          className: \"recomendation\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: path.includes('/comidas') ? rec.strDrinkThumb : rec.strMealThumb,\n          alt: \"alguma coisa\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"h2\", {\n          \"data-testid\": `${index}-recomendation-title`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }\n        }, path.includes('/comidas') ? rec.strDrink : rec.strMeal));\n      }\n\n      return undefined;\n    });\n  }\n\n  render() {\n    const {\n      match: {\n        path\n      },\n      location: {\n        pathname\n      }\n    } = this.props;\n    console.log(pathname);\n    const {\n      recipe,\n      recomendation\n    } = this.state;\n    console.log(recomendation);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"body-details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      \"data-testid\": \"recipe-photo\",\n      src: recipe.strMealThumb ? recipe.strMealThumb : recipe.strDrinkThumb,\n      alt: recipe.strMeal ? recipe.strMeal : recipe.strDrink,\n      width: \"300vw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      \"data-testid\": \"recipe-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    }, recipe.strMeal ? recipe.strMeal : recipe.strDrink), /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": \"share-btn\",\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }\n    }, \"compartilhar\"), /*#__PURE__*/React.createElement(\"button\", {\n      \"data-testid\": \"favorite-btn\",\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }\n    }, \"favoritar\"), this.renderCategory(path, recipe), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, \"Igredients\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }, this.renderIgredients(recipe))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, \"Intructions\"), /*#__PURE__*/React.createElement(\"span\", {\n      \"data-testid\": \"instructions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }, recipe.strInstructions)), this.renderVideo(path, recipe), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"details-recomendation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, recomendation.length > 0 ? this.renderRecomendation(recomendation, path) : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 63\n      }\n    }, \"...Loading\")), /*#__PURE__*/React.createElement(Link, {\n      to: `${pathname}/in-progress`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"start-recipe-btn\",\n      className: \"button-iniciar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }, \"Iniciar Receita\")));\n  }\n\n}\n\nDetails.propTypes = {\n  match: PropTypes.objectOf({\n    params: PropTypes.objectOf(PropTypes.string),\n    path: PropTypes.string\n  }).isRequired,\n  location: PropTypes.objectOf(PropTypes.string).isRequired\n};\n\nconst mapStateToProps = state => ({\n  foodData: state.foodData.data,\n  drinkData: state.drinkData.data\n});\n\nexport default connect(mapStateToProps)(Details);","map":{"version":3,"sources":["/home/bamberg/sd-013-b-project-recipes-app/src/pages/Details.jsx"],"names":["PropTypes","React","Component","connect","Link","getDrinksApi","getFoodApi","Details","constructor","props","state","recipe","recomendation","renderIgredients","bind","fetchRecomendations","renderVideo","renderCategory","renderRecomendation","componentDidMount","fetchRecipeById","match","path","includes","response","setState","drinks","meals","params","id","array","Object","keys","arrayVazio","map","key","push","undefined","igr","index","strYoutube","strCategory","strAlcoholic","six","rec","strDrinkThumb","strMealThumb","strDrink","strMeal","render","location","pathname","console","log","strInstructions","length","propTypes","objectOf","string","isRequired","mapStateToProps","foodData","data","drinkData"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { getDrinksApi, getFoodApi } from '../services';\nimport './details.css';\n\nclass Details extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      recipe: {},\n      recomendation: [],\n    };\n    this.renderIgredients = this.renderIgredients.bind(this);\n    this.fetchRecomendations = this.fetchRecomendations.bind(this);\n    this.renderVideo = this.renderVideo.bind(this);\n    this.renderCategory = this.renderCategory.bind(this);\n    this.renderRecomendation = this.renderRecomendation.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchRecipeById();\n    this.fetchRecomendations();\n  }\n\n  async fetchRecomendations() {\n    const { match: { path } } = this.props;\n    if (path.includes('/comidas')) {\n      const response = await getDrinksApi('search.php?s=', '');\n      this.setState({\n        recomendation: response.drinks,\n      });\n    } else {\n      const response = await getFoodApi('search.php?s=', '');\n      this.setState({\n        recomendation: response.meals,\n      });\n    }\n  }\n\n  async fetchRecipeById() {\n    const { match: { params: { id }, path } } = this.props;\n    if (path.includes('/comidas')) {\n      const response = await getFoodApi(`lookup.php?i=${id}`, '');\n      this.setState({\n        recipe: response.meals[0],\n      });\n    } else {\n      const response = await getDrinksApi(`lookup.php?i=${id}`, '');\n      this.setState({\n        recipe: response.drinks[0],\n      });\n    }\n  }\n\n  renderIgredients(recipe) {\n    const array = Object.keys(recipe);\n    const arrayVazio = [];\n    array.map((key) => {\n      if (key.includes('strIngredient') && recipe[key] !== null && recipe[key] !== '') {\n        arrayVazio.push(recipe[key]);\n        return arrayVazio;\n      }\n      return undefined;\n    });\n    return arrayVazio.map((igr, index) => (\n      <li\n        data-testid={ `${index}-ingredient-name-and-measure` }\n        key={ igr }\n      >\n        { igr }\n        -\n        { recipe[`strMeasure${index + 1}`] }\n      </li>\n    ));\n  }\n\n  renderVideo(path, recipe) {\n    if (path.includes('/comidas')) {\n      return (\n        <div>\n          <h2>Video</h2>\n          <iframe\n            data-testid=\"video\"\n            width=\"300\"\n            height=\"150\"\n            src={ recipe.strYoutube }\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay;\n             clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n            title=\"Embedded youtube\"\n          />\n        </div>\n      );\n    }\n    return undefined;\n  }\n\n  renderCategory(path, recipe) {\n    if (path.includes('/comidas')) {\n      return (\n        <h2 data-testid=\"recipe-category\">{recipe.strCategory}</h2>\n      );\n    }\n    return (\n      <div>\n        <h2 data-testid=\"recipe-category\">{recipe.strAlcoholic}</h2>\n        <h2 data-testid=\"recipe-category\">{recipe.strCategory}</h2>\n      </div>\n    );\n  }\n\n  renderRecomendation(recomendation, path) {\n    const six = 6;\n    return recomendation.map((rec, index) => {\n      if (index < six) {\n        return (\n          <div data-testid={ `${index}-recomendation-card` } className=\"recomendation\">\n            <img\n              src={ path.includes('/comidas') ? rec.strDrinkThumb\n                : rec.strMealThumb }\n              alt=\"alguma coisa\"\n            />\n            <h2 data-testid={ `${index}-recomendation-title` }>\n              { path.includes('/comidas') ? rec.strDrink\n                : rec.strMeal }\n            </h2>\n          </div>\n        );\n      }\n      return undefined;\n    });\n  }\n\n  render() {\n    const { match: { path }, location: { pathname } } = this.props;\n    console.log(pathname);\n    const { recipe, recomendation } = this.state;\n    console.log(recomendation);\n    return (\n      <div className=\"body-details\">\n        <img\n          data-testid=\"recipe-photo\"\n          src={ recipe.strMealThumb ? recipe.strMealThumb : recipe.strDrinkThumb }\n          alt={ recipe.strMeal ? recipe.strMeal : recipe.strDrink }\n          width=\"300vw\"\n        />\n        <h1 data-testid=\"recipe-title\">\n          { recipe.strMeal ? recipe.strMeal : recipe.strDrink }\n        </h1>\n        <button data-testid=\"share-btn\" type=\"button\">compartilhar</button>\n        <button data-testid=\"favorite-btn\" type=\"button\">favoritar</button>\n        { this.renderCategory(path, recipe) }\n        <div>\n          <h2>Igredients</h2>\n          <ul>\n            {this.renderIgredients(recipe)}\n          </ul>\n        </div>\n        <div>\n          <h2>Intructions</h2>\n          <span data-testid=\"instructions\">{recipe.strInstructions}</span>\n        </div>\n        { this.renderVideo(path, recipe) }\n        <div className=\"details-recomendation\">\n          { recomendation.length > 0\n            ? this.renderRecomendation(recomendation, path) : <span>...Loading</span>}\n        </div>\n        <Link to={ `${pathname}/in-progress` }>\n          <button\n            type=\"button\"\n            data-testid=\"start-recipe-btn\"\n            className=\"button-iniciar\"\n          >\n            Iniciar Receita\n          </button>\n        </Link>\n      </div>\n    );\n  }\n}\n\nDetails.propTypes = {\n  match: PropTypes.objectOf({\n    params: PropTypes.objectOf(PropTypes.string),\n    path: PropTypes.string,\n  }).isRequired,\n  location: PropTypes.objectOf(PropTypes.string).isRequired,\n};\nconst mapStateToProps = (state) => ({\n  foodData: state.foodData.data,\n  drinkData: state.drinkData.data,\n});\n\nexport default connect(mapStateToProps)(Details);\n"]},"metadata":{},"sourceType":"module"}