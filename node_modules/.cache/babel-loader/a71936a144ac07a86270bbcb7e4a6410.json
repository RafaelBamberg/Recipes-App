{"ast":null,"code":"var _jsxFileName = \"/home/bamberg/sd-013-b-project-recipes-app/src/pages/Details.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { adcMadeRecipesFood as madeFoodAction, adcMadeRecipesDrink as madeDrinkAction } from '../redux/actions';\nimport { renderButton } from '../components/RenderButtonDetails';\nimport { getDrinksApi, getFoodApi } from '../services';\nimport { renderRecomendation, confereFavorite, adcFavorite, renderCategory, renderVideo, renderIgredients, removeFavorite } from '../components/FunctionsDetails';\nimport './details.css';\nimport shareIcon from \"../images/shareIcon.svg\";\nimport whiteHeartIcon from \"../images/whiteHeartIcon.svg\";\nimport blackHeartIcon from \"../images/blackHeartIcon.svg\";\n\nclass Details extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      recipe: {},\n      recomendation: [],\n      sharedLink: false,\n      favorite: false\n    };\n    this.fetchRecomendations = this.fetchRecomendations.bind(this);\n    this.shareRecipe = this.shareRecipe.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchRecipeById();\n    this.fetchRecomendations();\n    const storageDrink = JSON.parse(localStorage.getItem('madeDrink'));\n    const storageFood = JSON.parse(localStorage.getItem('madeFood'));\n\n    if (!storageDrink) {\n      localStorage.setItem('madeDrink', JSON.stringify([]));\n    }\n\n    if (!storageFood) {\n      localStorage.setItem('madeFood', JSON.stringify([]));\n    }\n\n    const storageFavorites = JSON.parse(localStorage.getItem('favoriteRecipes'));\n\n    if (!storageFavorites) {\n      localStorage.setItem('favoriteRecipes', JSON.stringify([]));\n    }\n\n    const storageInProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (!storageInProgress) {\n      localStorage.setItem('inProgressRecipes', JSON.stringify({}));\n    }\n\n    this.setFavorite();\n  }\n\n  setFavorite() {\n    const {\n      match: {\n        params: {\n          id\n        }\n      }\n    } = this.props;\n    this.setState({\n      favorite: confereFavorite(id)\n    });\n  }\n\n  async fetchRecomendations() {\n    const {\n      match: {\n        path\n      }\n    } = this.props;\n\n    if (path.includes('/comidas')) {\n      const response = await getDrinksApi('search.php?s=', '');\n      this.setState({\n        recomendation: response.drinks\n      });\n    } else {\n      const response = await getFoodApi('search.php?s=', '');\n      this.setState({\n        recomendation: response.meals\n      });\n    }\n  }\n\n  async fetchRecipeById() {\n    const {\n      match: {\n        params: {\n          id\n        },\n        path\n      }\n    } = this.props;\n\n    if (path.includes('/comidas')) {\n      const response = await getFoodApi(`lookup.php?i=${id}`, '');\n      this.setState({\n        recipe: response.meals[0]\n      });\n    } else {\n      const response = await getDrinksApi(`lookup.php?i=${id}`, '');\n      this.setState({\n        recipe: response.drinks[0]\n      });\n    }\n  }\n\n  shareRecipe() {\n    document.getElementById('link-to-share').select();\n    document.execCommand('copy');\n    this.setState({\n      sharedLink: true\n    });\n  }\n\n  render() {\n    const {\n      match: {\n        path,\n        params: {\n          id\n        }\n      },\n      location: {\n        pathname\n      }\n    } = this.props;\n    const {\n      recipe,\n      recomendation,\n      sharedLink,\n      favorite\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"body-details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      \"data-testid\": \"recipe-photo\",\n      src: recipe.strMealThumb ? recipe.strMealThumb : recipe.strDrinkThumb,\n      alt: recipe.strMeal ? recipe.strMeal : recipe.strDrink,\n      width: \"300vw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      \"data-testid\": \"recipe-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }, recipe.strMeal ? recipe.strMeal : recipe.strDrink), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"linkShare\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"url\",\n      id: \"link-to-share\",\n      value: window.location.href,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.shareRecipe,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: shareIcon,\n      alt: \"shareIcon\",\n      \"data-testid\": \"share-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        if (confereFavorite(id) === true) {\n          removeFavorite(recipe);\n          return this.setState({\n            favorite: false\n          });\n        }\n\n        adcFavorite(recipe);\n        return this.setState({\n          favorite: true\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: favorite ? blackHeartIcon : whiteHeartIcon,\n      alt: \"\",\n      \"data-testid\": \"favorite-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    })), sharedLink ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 24\n      }\n    }, \"Link copiado!\") : '', renderCategory(path, recipe), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    }, \"Igredients\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }\n    }, renderIgredients(recipe))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }, \"Intructions\"), /*#__PURE__*/React.createElement(\"span\", {\n      \"data-testid\": \"instructions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, recipe.strInstructions)), renderVideo(path, recipe), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"details-recomendation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }\n    }, recomendation.length > 0 ? renderRecomendation(recomendation, path) : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 58\n      }\n    }, \"...Loading\")), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"button-details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"button-details-child\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `${pathname}/in-progress`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, renderButton(recipe)))));\n  }\n\n}\n\nDetails.propTypes = {\n  match: PropTypes.objectOf({\n    params: PropTypes.objectOf(PropTypes.string),\n    path: PropTypes.string\n  }).isRequired,\n  location: PropTypes.objectOf(PropTypes.string).isRequired\n};\n\nconst mapStateToProps = state => ({\n  foodData: state.foodData.data,\n  drinkData: state.drinkData.data\n});\n\nconst mapDispatchToProps = dispatch => ({\n  adcMadeFood: payload => dispatch(madeFoodAction(payload)),\n  adcMadeDrink: payload => dispatch(madeDrinkAction(payload))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Details);","map":{"version":3,"sources":["/home/bamberg/sd-013-b-project-recipes-app/src/pages/Details.jsx"],"names":["React","Component","PropTypes","connect","Link","adcMadeRecipesFood","madeFoodAction","adcMadeRecipesDrink","madeDrinkAction","renderButton","getDrinksApi","getFoodApi","renderRecomendation","confereFavorite","adcFavorite","renderCategory","renderVideo","renderIgredients","removeFavorite","Details","constructor","props","state","recipe","recomendation","sharedLink","favorite","fetchRecomendations","bind","shareRecipe","componentDidMount","fetchRecipeById","storageDrink","JSON","parse","localStorage","getItem","storageFood","setItem","stringify","storageFavorites","storageInProgress","setFavorite","match","params","id","setState","path","includes","response","drinks","meals","document","getElementById","select","execCommand","render","location","pathname","strMealThumb","strDrinkThumb","strMeal","strDrink","window","href","shareIcon","blackHeartIcon","whiteHeartIcon","strInstructions","length","propTypes","objectOf","string","isRequired","mapStateToProps","foodData","data","drinkData","mapDispatchToProps","dispatch","adcMadeFood","payload","adcMadeDrink"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SACEC,kBAAkB,IAAIC,cADxB,EAEEC,mBAAmB,IAAIC,eAFzB,QAGO,kBAHP;AAIA,SAASC,YAAT,QAA6B,mCAA7B;AAEA,SAASC,YAAT,EAAuBC,UAAvB,QAAyC,aAAzC;AACA,SAASC,mBAAT,EAA8BC,eAA9B,EACEC,WADF,EACeC,cADf,EAC+BC,WAD/B,EAC4CC,gBAD5C,EAC8DC,cAD9D,QAEO,gCAFP;AAGA,OAAO,eAAP;;;;;AAKA,MAAMC,OAAN,SAAsBlB,SAAtB,CAAgC;AAC9BmB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,EADG;AAEXC,MAAAA,aAAa,EAAE,EAFJ;AAGXC,MAAAA,UAAU,EAAE,KAHD;AAIXC,MAAAA,QAAQ,EAAE;AAJC,KAAb;AAMA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACD;;AAEDE,EAAAA,iBAAiB,GAAG;AAClB,SAAKC,eAAL;AACA,SAAKJ,mBAAL;AACA,UAAMK,YAAY,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAArB;AACA,UAAMC,WAAW,GAAGJ,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAApB;;AACA,QAAI,CAACJ,YAAL,EAAmB;AACjBG,MAAAA,YAAY,CAACG,OAAb,CAAqB,WAArB,EAAkCL,IAAI,CAACM,SAAL,CAAe,EAAf,CAAlC;AACD;;AACD,QAAI,CAACF,WAAL,EAAkB;AAChBF,MAAAA,YAAY,CAACG,OAAb,CAAqB,UAArB,EAAiCL,IAAI,CAACM,SAAL,CAAe,EAAf,CAAjC;AACD;;AACD,UAAMC,gBAAgB,GAAGP,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAX,CAAzB;;AACA,QAAI,CAACI,gBAAL,EAAuB;AACrBL,MAAAA,YAAY,CAACG,OAAb,CAAqB,iBAArB,EAAwCL,IAAI,CAACM,SAAL,CAAe,EAAf,CAAxC;AACD;;AACD,UAAME,iBAAiB,GAAGR,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,mBAArB,CAAX,CAA1B;;AACA,QAAI,CAACK,iBAAL,EAAwB;AACtBN,MAAAA,YAAY,CAACG,OAAb,CAAqB,mBAArB,EAA0CL,IAAI,CAACM,SAAL,CAAe,EAAf,CAA1C;AACD;;AACD,SAAKG,WAAL;AACD;;AAEDA,EAAAA,WAAW,GAAG;AACZ,UAAM;AAAEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,MAAM,EAAE;AAAEC,UAAAA;AAAF;AAAV;AAAT,QAAgC,KAAKxB,KAA3C;AACA,SAAKyB,QAAL,CAAc;AAAEpB,MAAAA,QAAQ,EAAEb,eAAe,CAACgC,EAAD;AAA3B,KAAd;AACD;;AAED,QAAMlB,mBAAN,GAA4B;AAC1B,UAAM;AAAEgB,MAAAA,KAAK,EAAE;AAAEI,QAAAA;AAAF;AAAT,QAAsB,KAAK1B,KAAjC;;AACA,QAAI0B,IAAI,CAACC,QAAL,CAAc,UAAd,CAAJ,EAA+B;AAC7B,YAAMC,QAAQ,GAAG,MAAMvC,YAAY,CAAC,eAAD,EAAkB,EAAlB,CAAnC;AACA,WAAKoC,QAAL,CAAc;AACZtB,QAAAA,aAAa,EAAEyB,QAAQ,CAACC;AADZ,OAAd;AAGD,KALD,MAKO;AACL,YAAMD,QAAQ,GAAG,MAAMtC,UAAU,CAAC,eAAD,EAAkB,EAAlB,CAAjC;AACA,WAAKmC,QAAL,CAAc;AACZtB,QAAAA,aAAa,EAAEyB,QAAQ,CAACE;AADZ,OAAd;AAGD;AACF;;AAED,QAAMpB,eAAN,GAAwB;AACtB,UAAM;AAAEY,MAAAA,KAAK,EAAE;AAAEC,QAAAA,MAAM,EAAE;AAAEC,UAAAA;AAAF,SAAV;AAAkBE,QAAAA;AAAlB;AAAT,QAAsC,KAAK1B,KAAjD;;AACA,QAAI0B,IAAI,CAACC,QAAL,CAAc,UAAd,CAAJ,EAA+B;AAC7B,YAAMC,QAAQ,GAAG,MAAMtC,UAAU,CAAE,gBAAekC,EAAG,EAApB,EAAuB,EAAvB,CAAjC;AACA,WAAKC,QAAL,CAAc;AACZvB,QAAAA,MAAM,EAAE0B,QAAQ,CAACE,KAAT,CAAe,CAAf;AADI,OAAd;AAGD,KALD,MAKO;AACL,YAAMF,QAAQ,GAAG,MAAMvC,YAAY,CAAE,gBAAemC,EAAG,EAApB,EAAuB,EAAvB,CAAnC;AACA,WAAKC,QAAL,CAAc;AACZvB,QAAAA,MAAM,EAAE0B,QAAQ,CAACC,MAAT,CAAgB,CAAhB;AADI,OAAd;AAGD;AACF;;AAEDrB,EAAAA,WAAW,GAAG;AACZuB,IAAAA,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,MAAzC;AACAF,IAAAA,QAAQ,CAACG,WAAT,CAAqB,MAArB;AACA,SAAKT,QAAL,CAAc;AAAErB,MAAAA,UAAU,EAAE;AAAd,KAAd;AACD;;AAED+B,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEb,MAAAA,KAAK,EAAE;AAAEI,QAAAA,IAAF;AAAQH,QAAAA,MAAM,EAAE;AAAEC,UAAAA;AAAF;AAAhB,OAAT;AAAmCY,MAAAA,QAAQ,EAAE;AAAEC,QAAAA;AAAF;AAA7C,QAA8D,KAAKrC,KAAzE;AACA,UAAM;AAAEE,MAAAA,MAAF;AAAUC,MAAAA,aAAV;AAAyBC,MAAAA,UAAzB;AAAqCC,MAAAA;AAArC,QAAkD,KAAKJ,KAA7D;AACA,wBACE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,qBAAY,cADd;AAEE,MAAA,GAAG,EAAGC,MAAM,CAACoC,YAAP,GAAsBpC,MAAM,CAACoC,YAA7B,GAA4CpC,MAAM,CAACqC,aAF3D;AAGE,MAAA,GAAG,EAAGrC,MAAM,CAACsC,OAAP,GAAiBtC,MAAM,CAACsC,OAAxB,GAAkCtC,MAAM,CAACuC,QAHjD;AAIE,MAAA,KAAK,EAAC,OAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAOE;AAAI,qBAAY,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACIvC,MAAM,CAACsC,OAAP,GAAiBtC,MAAM,CAACsC,OAAxB,GAAkCtC,MAAM,CAACuC,QAD7C,CAPF,eAUE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,IAAI,EAAC,KADP;AAEE,MAAA,EAAE,EAAC,eAFL;AAGE,MAAA,KAAK,EAAGC,MAAM,CAACN,QAAP,CAAgBO,IAH1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAVF,eAiBE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,OAAO,EAAG,KAAKnC,WAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIE;AAAK,MAAA,GAAG,EAAGoC,SAAX;AAAuB,MAAA,GAAG,EAAC,WAA3B;AAAuC,qBAAY,WAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CAjBF,eAuBE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,OAAO,EAAG,MAAM;AACd,YAAIpD,eAAe,CAACgC,EAAD,CAAf,KAAwB,IAA5B,EAAkC;AAChC3B,UAAAA,cAAc,CAACK,MAAD,CAAd;AACA,iBAAO,KAAKuB,QAAL,CAAc;AAAEpB,YAAAA,QAAQ,EAAE;AAAZ,WAAd,CAAP;AACD;;AACDZ,QAAAA,WAAW,CAACS,MAAD,CAAX;AACA,eAAO,KAAKuB,QAAL,CAAc;AAAEpB,UAAAA,QAAQ,EAAE;AAAZ,SAAd,CAAP;AACD,OATH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAWE;AACE,MAAA,GAAG,EAAGA,QAAQ,GAAGwC,cAAH,GAAoBC,cADpC;AAEE,MAAA,GAAG,EAAC,EAFN;AAGE,qBAAY,cAHd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXF,CAvBF,EAwCI1C,UAAU,gBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAH,GAA0B,EAxCxC,EAyCIV,cAAc,CAACgC,IAAD,EAAOxB,MAAP,CAzClB,eA0CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACIN,gBAAgB,CAACM,MAAD,CADpB,CAFF,CA1CF,eAgDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAM,qBAAY,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAkCA,MAAM,CAAC6C,eAAzC,CAFF,CAhDF,EAoDIpD,WAAW,CAAC+B,IAAD,EAAOxB,MAAP,CApDf,eAqDE;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACIC,aAAa,CAAC6C,MAAd,GAAuB,CAAvB,GACEzD,mBAAmB,CAACY,aAAD,EAAgBuB,IAAhB,CADrB,gBAC6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFjD,CArDF,eAyDE;AAAK,MAAA,EAAE,EAAC,gBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,EAAE,EAAC,sBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAI,GAAEW,QAAS,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACIjD,YAAY,CAACc,MAAD,CADhB,CADF,CADF,CAzDF,CADF;AAmED;;AAlJ6B;;AAqJhCJ,OAAO,CAACmD,SAAR,GAAoB;AAClB3B,EAAAA,KAAK,EAAEzC,SAAS,CAACqE,QAAV,CAAmB;AACxB3B,IAAAA,MAAM,EAAE1C,SAAS,CAACqE,QAAV,CAAmBrE,SAAS,CAACsE,MAA7B,CADgB;AAExBzB,IAAAA,IAAI,EAAE7C,SAAS,CAACsE;AAFQ,GAAnB,EAGJC,UAJe;AAKlBhB,EAAAA,QAAQ,EAAEvD,SAAS,CAACqE,QAAV,CAAmBrE,SAAS,CAACsE,MAA7B,EAAqCC;AAL7B,CAApB;;AAOA,MAAMC,eAAe,GAAIpD,KAAD,KAAY;AAClCqD,EAAAA,QAAQ,EAAErD,KAAK,CAACqD,QAAN,CAAeC,IADS;AAElCC,EAAAA,SAAS,EAAEvD,KAAK,CAACuD,SAAN,CAAgBD;AAFO,CAAZ,CAAxB;;AAKA,MAAME,kBAAkB,GAAIC,QAAD,KAAe;AACxCC,EAAAA,WAAW,EAAGC,OAAD,IAAaF,QAAQ,CAACzE,cAAc,CAAC2E,OAAD,CAAf,CADM;AAExCC,EAAAA,YAAY,EAAGD,OAAD,IAAaF,QAAQ,CAACvE,eAAe,CAACyE,OAAD,CAAhB;AAFK,CAAf,CAA3B;;AAKA,eAAe9E,OAAO,CAACuE,eAAD,EAAkBI,kBAAlB,CAAP,CAA6C3D,OAA7C,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport {\n  adcMadeRecipesFood as madeFoodAction,\n  adcMadeRecipesDrink as madeDrinkAction,\n} from '../redux/actions';\nimport { renderButton } from '../components/RenderButtonDetails';\n\nimport { getDrinksApi, getFoodApi } from '../services';\nimport { renderRecomendation, confereFavorite,\n  adcFavorite, renderCategory, renderVideo, renderIgredients, removeFavorite }\n  from '../components/FunctionsDetails';\nimport './details.css';\nimport shareIcon from '../images/shareIcon.svg';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../images/blackHeartIcon.svg';\n\nclass Details extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      recipe: {},\n      recomendation: [],\n      sharedLink: false,\n      favorite: false,\n    };\n    this.fetchRecomendations = this.fetchRecomendations.bind(this);\n    this.shareRecipe = this.shareRecipe.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchRecipeById();\n    this.fetchRecomendations();\n    const storageDrink = JSON.parse(localStorage.getItem('madeDrink'));\n    const storageFood = JSON.parse(localStorage.getItem('madeFood'));\n    if (!storageDrink) {\n      localStorage.setItem('madeDrink', JSON.stringify([]));\n    }\n    if (!storageFood) {\n      localStorage.setItem('madeFood', JSON.stringify([]));\n    }\n    const storageFavorites = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    if (!storageFavorites) {\n      localStorage.setItem('favoriteRecipes', JSON.stringify([]));\n    }\n    const storageInProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    if (!storageInProgress) {\n      localStorage.setItem('inProgressRecipes', JSON.stringify({}));\n    }\n    this.setFavorite();\n  }\n\n  setFavorite() {\n    const { match: { params: { id } } } = this.props;\n    this.setState({ favorite: confereFavorite(id) });\n  }\n\n  async fetchRecomendations() {\n    const { match: { path } } = this.props;\n    if (path.includes('/comidas')) {\n      const response = await getDrinksApi('search.php?s=', '');\n      this.setState({\n        recomendation: response.drinks,\n      });\n    } else {\n      const response = await getFoodApi('search.php?s=', '');\n      this.setState({\n        recomendation: response.meals,\n      });\n    }\n  }\n\n  async fetchRecipeById() {\n    const { match: { params: { id }, path } } = this.props;\n    if (path.includes('/comidas')) {\n      const response = await getFoodApi(`lookup.php?i=${id}`, '');\n      this.setState({\n        recipe: response.meals[0],\n      });\n    } else {\n      const response = await getDrinksApi(`lookup.php?i=${id}`, '');\n      this.setState({\n        recipe: response.drinks[0],\n      });\n    }\n  }\n\n  shareRecipe() {\n    document.getElementById('link-to-share').select();\n    document.execCommand('copy');\n    this.setState({ sharedLink: true });\n  }\n\n  render() {\n    const { match: { path, params: { id } }, location: { pathname } } = this.props;\n    const { recipe, recomendation, sharedLink, favorite } = this.state;\n    return (\n      <div className=\"body-details\">\n        <img\n          data-testid=\"recipe-photo\"\n          src={ recipe.strMealThumb ? recipe.strMealThumb : recipe.strDrinkThumb }\n          alt={ recipe.strMeal ? recipe.strMeal : recipe.strDrink }\n          width=\"300vw\"\n        />\n        <h1 data-testid=\"recipe-title\">\n          { recipe.strMeal ? recipe.strMeal : recipe.strDrink }\n        </h1>\n        <div className=\"linkShare\">\n          <input\n            type=\"url\"\n            id=\"link-to-share\"\n            value={ window.location.href }\n          />\n        </div>\n        <button\n          type=\"button\"\n          onClick={ this.shareRecipe }\n        >\n          <img src={ shareIcon } alt=\"shareIcon\" data-testid=\"share-btn\" />\n        </button>\n        <button\n          type=\"button\"\n          onClick={ () => {\n            if (confereFavorite(id) === true) {\n              removeFavorite(recipe);\n              return this.setState({ favorite: false });\n            }\n            adcFavorite(recipe);\n            return this.setState({ favorite: true });\n          } }\n        >\n          <img\n            src={ favorite ? blackHeartIcon : whiteHeartIcon }\n            alt=\"\"\n            data-testid=\"favorite-btn\"\n          />\n        </button>\n        { sharedLink ? <p>Link copiado!</p> : '' }\n        { renderCategory(path, recipe) }\n        <div>\n          <h2>Igredients</h2>\n          <ul>\n            { renderIgredients(recipe) }\n          </ul>\n        </div>\n        <div>\n          <h2>Intructions</h2>\n          <span data-testid=\"instructions\">{recipe.strInstructions}</span>\n        </div>\n        { renderVideo(path, recipe) }\n        <div className=\"details-recomendation\">\n          { recomendation.length > 0\n            ? renderRecomendation(recomendation, path) : <span>...Loading</span>}\n        </div>\n        <div id=\"button-details\">\n          <div id=\"button-details-child\">\n            <Link to={ `${pathname}/in-progress` }>\n              { renderButton(recipe) }\n            </Link>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nDetails.propTypes = {\n  match: PropTypes.objectOf({\n    params: PropTypes.objectOf(PropTypes.string),\n    path: PropTypes.string,\n  }).isRequired,\n  location: PropTypes.objectOf(PropTypes.string).isRequired,\n};\nconst mapStateToProps = (state) => ({\n  foodData: state.foodData.data,\n  drinkData: state.drinkData.data,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  adcMadeFood: (payload) => dispatch(madeFoodAction(payload)),\n  adcMadeDrink: (payload) => dispatch(madeDrinkAction(payload)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Details);\n"]},"metadata":{},"sourceType":"module"}